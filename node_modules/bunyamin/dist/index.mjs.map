{"version":3,"file":"index.mjs","sources":["../src/decorator/categories/deflateCategories.ts","../src/decorator/categories/inflateCategories.ts","../src/decorator/categories/mergeCategories.ts","../src/is-debug/createIsDebug.ts","../src/is-debug/index.ts","../src/utils/flow.ts","../src/utils/isActionable.ts","../src/utils/isError.ts","../src/utils/isPromiseLike.ts","../src/utils/isObject.ts","../src/utils/isUndefined.ts","../src/decorator/message-stack/MessageStack.ts","../src/decorator/StackTraceError.ts","../src/decorator/Bunyamin.ts","../src/noopLogger/noopLogger.ts","../src/thread-groups/ThreadGroups.ts","../src/realm.ts","../src/streams/bunyan-trace-event/threads/ThreadDispatcher.ts","../src/streams/bunyan-trace-event/threads/ThreadGroupDispatcher.ts","../src/streams/bunyan-trace-event/bunyan2trace/bunyan2trace.ts","../src/streams/bunyan-trace-event/StreamEventBuilder.ts","../src/streams/bunyan-trace-event/options/normalizeOptions.ts","../src/streams/bunyan-trace-event/BunyanTraceEventStream.ts","../src/streams/jsonl/jsonlReadFile.ts","../src/streams/jsonl/jsonlWriteFile.ts","../src/streams/trace-merge/resolvers/tree/abstract/ArrayTreeNode.ts","../src/streams/trace-merge/resolvers/tree/abstract/RangeTreeNode.ts","../src/streams/trace-merge/resolvers/tree/concrete/FileNode.ts","../src/streams/trace-merge/resolvers/tree/concrete/PIDNode.ts","../src/streams/trace-merge/resolvers/tree/concrete/RootNode.ts","../src/streams/trace-merge/resolvers/PIDResolver.ts","../src/streams/trace-merge/resolvers/FilePIDResolver.ts","../src/streams/trace-merge/transforms/multisort.ts","../src/streams/trace-merge/transforms/TraceAnalyze.ts","../src/streams/trace-merge/transforms/TraceMerge.ts","../src/streams/trace-merge/traceMerge.ts","../src/traceEventStream.ts","../src/uniteTraceEvents.ts","../src/wrapLogger.ts","../src/index.ts"],"sourcesContent":["export function deflateCategories(cat: unknown): string | undefined {\n  if (!cat) {\n    return undefined;\n  }\n\n  if (Array.isArray(cat)) {\n    return cat.filter(Boolean).join(',');\n  }\n\n  return String(cat);\n}\n","export function inflateCategories(cat: unknown): string[] {\n  if (!cat) {\n    return [];\n  }\n\n  if (Array.isArray(cat)) {\n    return cat;\n  }\n\n  return String(cat).split(',');\n}\n","import { inflateCategories } from './inflateCategories';\n\nexport function mergeCategories(left: string[] | undefined, right: unknown): string[] | undefined {\n  if (!left || !right) {\n    if (left) return left;\n    if (right) return inflateCategories(right);\n    return undefined;\n  }\n\n  const iright = inflateCategories(right);\n  const categories = left ? [...left, ...iright] : iright;\n  const uniqueCategories = new Set(categories);\n  return [...uniqueCategories.values()];\n}\n","export function createIsDebug(namespaces: string) {\n  const skips: RegExp[] = [];\n  const names: RegExp[] = [];\n\n  for (const part of namespaces.split(/[\\s,]+/)) {\n    if (!part) {\n      continue;\n    }\n\n    const destination = part[0] === '-' ? skips : names;\n    const pattern = part.replace(/^-/, '').replace(/\\*/g, '.*?');\n    destination.push(new RegExp(`^${pattern}$`));\n  }\n\n  return function isDebug(name: string): boolean {\n    // eslint-disable-next-line unicorn/prefer-at\n    if (name[name.length - 1] === '*') {\n      return true;\n    }\n\n    if (skips.some((regex) => regex.test(name))) {\n      return false;\n    }\n\n    if (names.some((regex) => regex.test(name))) {\n      return true;\n    }\n\n    return false;\n  };\n}\n","import { createIsDebug } from './createIsDebug';\n\nexport const isDebug = createIsDebug(process.env.DEBUG || '');\n\nexport const isSelfDebug = () => isDebug('bunyamin');\n","export function flow<T1, T2, R>(f: (x: T1) => T2, g: (x: T2) => R): (x: T1) => R {\n  return (x: T1) => g(f(x));\n}\n","export function isActionable<T>(value: T | (() => T)): value is () => T {\n  return typeof value === 'function';\n}\n","export function isError(value: unknown): value is Error {\n  return value instanceof Error;\n}\n","export function isPromiseLike(maybePromise: unknown): maybePromise is PromiseLike<unknown> {\n  return maybePromise ? typeof (maybePromise as PromiseLike<unknown>).then === 'function' : false;\n}\n","export function isObject(value: unknown): value is object {\n  return value ? typeof value === 'object' : false;\n}\n","export function isUndefined(x: unknown): x is undefined {\n  return x === undefined;\n}\n","/* eslint-disable @typescript-eslint/no-non-null-assertion */\nimport type { ThreadID } from '../../types';\n\ntype Message = unknown[];\n\nexport type MessageStackOptions = {\n  /**\n   * A string or any other value to be used as the message when a thread\n   * is popped without any message being pushed previously.\n   * @default '<no begin message>'\n   */\n  noBeginMessage?: unknown;\n};\n\nexport class MessageStack {\n  readonly #simple = new Map<unknown, Message[]>();\n  readonly #complex = new Map<unknown, Map<unknown, Message[]>>();\n  readonly #noBeginMessage: Message;\n\n  constructor(options: MessageStackOptions = {}) {\n    this.#noBeginMessage = [options.noBeginMessage ?? '<no begin message>'];\n  }\n\n  push(tid: ThreadID | undefined, message: unknown[]): void {\n    const stack = this.#ensureStack(tid);\n    stack.push(message);\n  }\n\n  pop(tid: ThreadID | undefined): unknown[] {\n    const stack = this.#ensureStack(tid);\n    return stack.pop() ?? this.#noBeginMessage;\n  }\n\n  #ensureStack(tid: ThreadID | undefined): Message[] {\n    if (!Array.isArray(tid)) {\n      if (!this.#simple.has(tid)) {\n        this.#simple.set(tid, []);\n      }\n\n      return this.#simple.get(tid)!;\n    }\n\n    const [alias, subtid] = tid;\n    if (!this.#complex.has(alias)) {\n      this.#complex.set(alias, new Map());\n    }\n\n    const submap = this.#complex.get(alias)!;\n    if (!submap.has(subtid)) {\n      submap.set(subtid, []);\n    }\n\n    return submap.get(subtid)!;\n  }\n}\n","export class StackTraceError extends Error {\n  constructor() {\n    super('Providing stack trace below:');\n    // eslint-disable-next-line unicorn/custom-error-definition\n    this.name = 'StackTrace';\n  }\n\n  static empty() {\n    return {\n      message: '',\n      stack: '',\n    };\n  }\n}\n","import { deflateCategories, mergeCategories } from './categories';\nimport { isSelfDebug } from '../is-debug';\nimport type { ThreadGroupConfig } from '../streams';\nimport type { ThreadID } from '../types';\nimport { flow, isActionable, isError, isObject, isPromiseLike } from '../utils';\nimport type {\n  BunyaminLogMethod,\n  BunyaminConfig,\n  BunyaminLogRecordFields as UserFields,\n  BunyanLikeLogger,\n  BunyanLogLevel,\n} from './types';\nimport { MessageStack } from './message-stack';\nimport { StackTraceError } from './StackTraceError';\n\nexport class Bunyamin<Logger extends BunyanLikeLogger = BunyanLikeLogger> {\n  public readonly fatal = this.#setupLogMethod('fatal');\n  public readonly error = this.#setupLogMethod('error');\n  public readonly warn = this.#setupLogMethod('warn');\n  public readonly info = this.#setupLogMethod('info');\n  public readonly debug = this.#setupLogMethod('debug');\n  public readonly trace = this.#setupLogMethod('trace');\n\n  readonly #fields: PredefinedFields | undefined;\n  /**\n   * All instances of {@link Bunyamin} must share the same object instance\n   */\n  readonly #shared: SharedBunyaminConfig<Logger>;\n\n  constructor(config: BunyaminConfig<Logger>, fields?: never);\n  constructor(shared: unknown, fields?: unknown) {\n    if (fields === undefined) {\n      const config = shared as BunyaminConfig<Logger>;\n\n      this.#fields = undefined;\n      this.#shared = {\n        ...config,\n        loggerPriority: 0,\n        messageStack: new MessageStack({\n          noBeginMessage: config.noBeginMessage,\n        }),\n      };\n    } else {\n      this.#fields = fields as PredefinedFields;\n      this.#shared = shared as SharedBunyaminConfig<Logger>;\n    }\n  }\n\n  /** @deprecated */\n  get threadGroups(): ThreadGroupConfig[] {\n    return [];\n  }\n\n  get logger(): Logger {\n    return this.#shared.logger;\n  }\n\n  set logger(logger: Logger) {\n    this.useLogger(logger);\n  }\n\n  useLogger(logger: Logger, priority = 0): this {\n    this.#assertNotImmutable();\n    this.#assertNotChild('useLogger');\n\n    const { stack } = isSelfDebug() ? new StackTraceError() : StackTraceError.empty();\n    const currentPriority = this.#shared.loggerPriority;\n    if (priority >= currentPriority) {\n      this.#shared.loggerPriority = priority;\n      this.#shared.logger = logger;\n      stack &&\n        this.#shared.logger.trace(\n          { cat: 'bunyamin' },\n          `bunyamin logger changed (${priority} >= ${currentPriority}), caller was:\\n${stack}`,\n        );\n    } else {\n      stack &&\n        this.#shared.logger.trace(\n          { cat: 'bunyamin' },\n          `bunyamin logger not changed (${priority} < ${currentPriority}), caller was:\\n${stack}`,\n        );\n    }\n\n    return this;\n  }\n\n  useTransform(transformFields: Required<BunyaminConfig<Logger>>['transformFields']): this {\n    this.#assertNotImmutable();\n    this.#assertNotChild('useTransform');\n\n    this.#shared.transformFields = this.#shared.transformFields\n      ? flow(this.#shared.transformFields, transformFields)\n      : transformFields;\n\n    return this;\n  }\n\n  child(overrides?: UserFields): Bunyamin<Logger> {\n    const childContext = this.#mergeFields(this.#fields, this.#transformContext(overrides));\n    return new Bunyamin(this.#shared, childContext as never);\n  }\n\n  #setupLogMethod(level: BunyanLogLevel): BunyaminLogMethod {\n    const logMethod = this.#instant.bind(this, level);\n\n    return Object.assign(logMethod, {\n      begin: this.#begin.bind(this, level),\n      complete: this.#complete.bind(this, level),\n      end: this.#end.bind(this, level),\n    }) as BunyaminLogMethod;\n  }\n\n  #begin(level: BunyanLogLevel, ...arguments_: unknown[]): void {\n    const entry = this.#resolveLogEntry('B', arguments_);\n    this.#beginInternal(level, entry.fields, entry.message);\n  }\n\n  #beginInternal(level: BunyanLogLevel, fields: ResolvedFields, message: unknown[]): void {\n    this.#shared.messageStack.push(fields.tid, message);\n    this.#shared.logger[level](fields, ...message);\n  }\n\n  #end(level: BunyanLogLevel, ...arguments_: unknown[]): void {\n    const entry = this.#resolveLogEntry('E', arguments_);\n    this.#endInternal(level, entry.fields, entry.message);\n  }\n\n  #endInternal(level: BunyanLogLevel, fields: ResolvedFields, customMessage: unknown[]): void {\n    const beginMessage = this.#shared.messageStack.pop(fields.tid);\n    const message = customMessage.length > 0 ? customMessage : beginMessage;\n\n    this.#shared.logger[level](fields, ...(message as unknown[]));\n  }\n\n  #instant(level: BunyanLogLevel, ...arguments_: unknown[]): void {\n    const entry = this.#resolveLogEntry(void 0, arguments_);\n    this.#shared.logger[level](entry.fields, ...entry.message);\n  }\n\n  #complete<T>(\n    level: BunyanLogLevel,\n    maybeContext: unknown,\n    maybeMessage: unknown,\n    maybeAction: T | (() => T),\n  ): T {\n    const action = typeof maybeContext === 'string' ? (maybeMessage as T | (() => T)) : maybeAction;\n    const arguments_ = maybeAction === action ? [maybeContext, maybeMessage] : [maybeContext];\n    const { fields, message } = this.#resolveLogEntry('B', arguments_);\n\n    return this.#completeInternal(level, fields, message, action);\n  }\n\n  #completeInternal<T>(\n    level: BunyanLogLevel,\n    fields: ResolvedFields,\n    message: unknown[],\n    action: T | (() => T),\n  ): T {\n    const end = (customContext: EndContext) => {\n      const endContext = {\n        ...customContext,\n        ph: 'E',\n        tid: fields.tid,\n      } as ResolvedFields;\n\n      this.#endInternal(level, endContext, []);\n    };\n\n    let result;\n    this.#beginInternal(level, fields, message);\n    try {\n      result = isActionable(action) ? action() : action;\n\n      if (isPromiseLike(result)) {\n        result.then(\n          () => end({ success: true }),\n          (error) => end({ success: false, err: error }),\n        );\n      } else {\n        end({ success: true });\n      }\n\n      return result;\n    } catch (error: unknown) {\n      end({ success: false, err: error });\n      throw error;\n    }\n  }\n\n  #resolveLogEntry(phase: MaybePhase, arguments_: unknown[]) {\n    const userContext = isObject(arguments_[0]) ? (arguments_[0] as MaybeUserFields) : undefined;\n    const fields = this.#mergeFields(this.#fields, this.#transformContext(userContext));\n    const message: unknown[] =\n      userContext === undefined\n        ? arguments_\n        : isError(arguments_[0]) && arguments_.length === 1\n        ? [arguments_[0].message]\n        : arguments_.slice(1);\n\n    return {\n      fields: this.#resolveFields(fields, phase),\n      message,\n    };\n  }\n\n  #mergeFields(\n    left: PredefinedFields | undefined,\n    right: UserFields | undefined,\n  ): PredefinedFields {\n    const result = {\n      ...left,\n      ...right,\n    };\n\n    const cat = mergeCategories(left?.cat, right?.cat);\n    if (result.cat !== cat) {\n      result.cat = cat;\n    }\n\n    return result as PredefinedFields;\n  }\n\n  #transformContext(maybeError: UserFields | Error | undefined): UserFields | undefined {\n    const fields: UserFields | undefined = isError(maybeError) ? { err: maybeError } : maybeError;\n    return this.#shared.transformFields ? this.#shared.transformFields(fields) : fields;\n  }\n\n  #resolveFields(fields: PredefinedFields, ph: MaybePhase): ResolvedFields {\n    const result: ResolvedFields = fields as ResolvedFields;\n    if (ph !== undefined) {\n      result.ph = ph as never;\n    }\n    if (result.cat !== undefined) {\n      result.cat = deflateCategories(result.cat);\n    }\n    return result;\n  }\n\n  #assertNotChild(methodName: string): void {\n    if (this.#fields) {\n      throw new Error(`Method Bunyamin#${methodName} is not available for child instances`);\n    }\n  }\n\n  #assertNotImmutable(): void {\n    if (this.#shared.immutable) {\n      throw new Error('Cannot change a logger of an immutable instance');\n    }\n  }\n}\n\ntype EndContext = {\n  success?: boolean;\n  err?: unknown;\n};\n\ntype MaybePhase = 'B' | 'E' | undefined;\n\ntype MaybeUserFields = UserFields | Error;\n\ntype PredefinedFields = UserFields & {\n  cat?: string[];\n};\n\ntype ResolvedFields = UserFields & {\n  cat?: string;\n  ph?: 'B' | 'E';\n  tid?: ThreadID;\n};\n\ntype SharedBunyaminConfig<Logger extends BunyanLikeLogger> = BunyaminConfig<Logger> & {\n  loggerPriority: number;\n  messageStack: MessageStack;\n};\n","import type { BunyanLikeLogger } from '../decorator';\n\nconst noop: any = () => {\n  /* no-op */\n};\n\nexport class NoopLogger implements BunyanLikeLogger {\n  fatal = noop;\n  error = noop;\n  warn = noop;\n  info = noop;\n  debug = noop;\n  trace = noop;\n}\n\nexport function noopLogger(_options?: any) {\n  return new NoopLogger();\n}\n","import type { Bunyamin } from '../decorator';\nimport type { ThreadGroupConfig } from '../streams';\nimport { isSelfDebug } from '../is-debug';\nimport { StackTraceError } from '../decorator/StackTraceError';\n\nexport class ThreadGroups {\n  readonly #bunyamin: Bunyamin;\n  readonly #debugMode = isSelfDebug();\n  readonly #groups = new Map<string, ThreadGroupConfig>();\n\n  constructor(bunyamin: Bunyamin) {\n    this.#bunyamin = bunyamin;\n    this.#groups = new Map();\n  }\n\n  add(group: ThreadGroupConfig) {\n    if (this.#debugMode) {\n      if (this.#groups.has(group.id)) {\n        this.#logAddition(group, 'overwritten');\n      } else {\n        this.#logAddition(group, 'added');\n      }\n    }\n\n    this.#groups.set(group.id, group);\n    return this;\n  }\n\n  [Symbol.iterator]() {\n    return this.#groups.values();\n  }\n\n  #logAddition(group: ThreadGroupConfig, action: string) {\n    const { stack } = new StackTraceError();\n    this.#bunyamin.trace(\n      { cat: 'bunyamin' },\n      `thread group ${action}: ${group.id} (${group.displayName})\\n\\n${stack}`,\n    );\n  }\n}\n","import { Bunyamin } from './decorator';\nimport { noopLogger } from './noopLogger';\nimport { isSelfDebug } from './is-debug';\nimport { ThreadGroups } from './thread-groups';\n\ntype Realm = {\n  bunyamin: Bunyamin;\n  nobunyamin: Bunyamin;\n  threadGroups: ThreadGroups;\n};\n\nfunction create() {\n  const selfDebug = isSelfDebug();\n  const bunyamin = new Bunyamin({ logger: noopLogger() });\n  const nobunyamin = new Bunyamin({\n    logger: noopLogger(),\n    immutable: true,\n  });\n  const threadGroups = new ThreadGroups(bunyamin);\n\n  if (selfDebug) {\n    bunyamin.trace({ cat: 'bunyamin' }, 'bunyamin global instance created');\n  }\n\n  return { bunyamin, nobunyamin, threadGroups };\n}\n\nfunction getCached(): Realm | undefined {\n  const result = (globalThis as any).__BUNYAMIN__;\n\n  if (isSelfDebug() && result) {\n    result.bunyamin.trace({ cat: 'bunyamin' }, 'bunyamin global instance retrieved from cache');\n  }\n\n  return result;\n}\n\nfunction setCached(realm: Realm) {\n  (globalThis as any).__BUNYAMIN__ = realm;\n  return realm;\n}\n\nexport default setCached(getCached() ?? create());\n","import { isUndefined } from '../../../utils';\n\nconst NIL = Symbol('NIL');\n\nexport class ThreadDispatcher {\n  readonly #stacks: number[] = [];\n  readonly #threads: unknown[] = [];\n  readonly #countMax: number;\n\n  constructor(\n    public readonly name: string,\n    public readonly strict: boolean,\n    public readonly min: number,\n    public readonly max: number,\n  ) {\n    this.#countMax = max - min + 1;\n  }\n\n  begin(id: unknown = NIL): number | Error {\n    const tid = this.#findTID(id);\n    if (tid === -1) {\n      return this.#error();\n    }\n\n    this.#threads[tid] = id;\n    this.#stacks[tid] = (this.#stacks[tid] || 0) + 1;\n\n    return this.#transposeTID(tid);\n  }\n\n  resolve(id: unknown = NIL): number | Error {\n    const tid = this.#findTID(id);\n    if (tid === -1) {\n      return this.#error();\n    }\n\n    return this.#transposeTID(tid);\n  }\n\n  end(id: unknown = NIL): number | Error {\n    const tid = this.#findTID(id);\n    if (tid === -1) {\n      return this.#error();\n    }\n\n    if (this.#stacks[tid] && --this.#stacks[tid] === 0) {\n      delete this.#threads[tid];\n    }\n\n    return this.#transposeTID(tid);\n  }\n\n  #findTID(id: unknown): number {\n    let tid = this.#threads.indexOf(id);\n    if (tid === -1) {\n      // Try to find a recently released slot in the array:\n      tid = this.#threads.findIndex(isUndefined);\n    }\n\n    if (tid === -1) {\n      tid = this.#threads.length;\n    }\n\n    return tid < this.#countMax ? tid : -1;\n  }\n\n  #transposeTID(tid: number): number {\n    return this.min + tid;\n  }\n\n  #error(): number | Error {\n    const count = this.#countMax;\n    const threads = count > 1 ? `threads` : `thread`;\n\n    return this.strict\n      ? new Error(`Exceeded limit of ${count} concurrent ${threads} in group \"${this.name}\"`)\n      : this.max;\n  }\n}\n","import IntervalTree from '@flatten-js/interval-tree';\n\nimport type { ThreadAlias, ThreadID } from '../../../types';\nimport { ThreadDispatcher } from './ThreadDispatcher';\nimport type { ThreadGroupConfig } from './ThreadGroupConfig';\n\nexport type ThreadGroupDispatcherConfig = {\n  defaultThreadName: string;\n  maxConcurrency: number;\n  strict: boolean;\n};\n\nexport class ThreadGroupDispatcher {\n  readonly #strict: boolean;\n  readonly #dispatchers: Record<string, ThreadDispatcher> = {};\n  readonly #maxConcurrency: number;\n  readonly #defaultThreadName: string;\n  readonly #names: IntervalTree = new IntervalTree();\n\n  #freeThreadId = 1;\n\n  constructor(options: ThreadGroupDispatcherConfig) {\n    this.#defaultThreadName = options.defaultThreadName;\n    this.#maxConcurrency = options.maxConcurrency;\n    this.#strict = options.strict;\n  }\n\n  registerThreadGroup(config: ThreadGroupConfig): this {\n    const maxConcurrency = config.maxConcurrency ?? this.#maxConcurrency;\n    const min = this.#freeThreadId;\n    const max = min + maxConcurrency - 1;\n\n    this.#dispatchers[config.id] = new ThreadDispatcher(config.displayName, this.#strict, min, max);\n    this.#names.insert([min, max], config.displayName);\n    this.#freeThreadId = max + 1;\n\n    return this;\n  }\n\n  name(tid: number): string | undefined {\n    if (tid === 0) {\n      return this.#defaultThreadName;\n    }\n\n    return this.#names.search([tid, tid])[0];\n  }\n\n  resolve(ph: string | undefined, tid: ThreadID | undefined): number | Error {\n    if (tid == null) {\n      return 0;\n    }\n\n    if (typeof tid === 'number') {\n      return tid;\n    }\n\n    const dispatcher = this.#resolveDispatcher(tid as ThreadAlias);\n    if (!dispatcher) {\n      return new Error(`Unknown thread group \"${this.#resolveAlias(tid)}\"`);\n    }\n\n    const id = this.#resolveId(tid);\n\n    switch (ph) {\n      case 'B': {\n        return dispatcher.begin(id);\n      }\n      case 'E': {\n        return dispatcher.end(id);\n      }\n      default: {\n        return dispatcher.resolve(id);\n      }\n    }\n  }\n\n  #resolveDispatcher(threadAlias: ThreadAlias): ThreadDispatcher {\n    const groupName = typeof threadAlias === 'string' ? threadAlias : threadAlias[0];\n    return this.#ensureGroupDispatcher(groupName);\n  }\n\n  #resolveAlias(threadAlias: ThreadAlias | undefined): unknown {\n    return Array.isArray(threadAlias) ? threadAlias[0] : threadAlias;\n  }\n\n  #resolveId(threadAlias: ThreadAlias | undefined): unknown {\n    return threadAlias === undefined || typeof threadAlias === 'string'\n      ? undefined\n      : threadAlias[1];\n  }\n\n  #ensureGroupDispatcher(threadGroup: string): ThreadDispatcher {\n    if (!this.#dispatchers[threadGroup] && !this.#strict) {\n      this.registerThreadGroup({ id: threadGroup, displayName: threadGroup });\n    }\n\n    return this.#dispatchers[threadGroup];\n  }\n}\n","/* eslint-disable unicorn/switch-case-braces,unicorn/prevent-abbreviations,@typescript-eslint/no-explicit-any*/\nimport type {\n  AsyncEvent,\n  CompleteEvent,\n  CounterEvent,\n  DurationBeginEvent,\n  DurationEndEvent,\n  Event,\n  EventWithStack,\n  InstantEvent,\n  MetadataEvent,\n} from 'trace-event-lib';\n\n// TODO: optimize args - they will be often empty objects\n\nexport function bunyan2trace(record: any): Event {\n  if (!record.ph) {\n    return buildFallbackEvent(record);\n  }\n\n  switch (record.ph) {\n    case 'B':\n      return buildDurationBeginEvent(record);\n    case 'E':\n      return buildDurationEndEvent(record);\n    case 'i':\n      return buildInstantEvent(record);\n    case 'b':\n    case 'e':\n    case 'n':\n      return buildAsyncEvent(record);\n    case 'X':\n      return buildCompleteEvent(record);\n    case 'C':\n      return buildCounterEvent(record);\n    case 'M':\n      return buildMetadataEvent(record);\n    default:\n      return buildFallbackEvent(record);\n  }\n}\n\nfunction buildAsyncEvent(record: any): AsyncEvent {\n  const event = bunyan2trace(record) as AsyncEvent;\n  return moveProperties(event.args!, event, ['id', 'id2', 'scope']);\n}\n\nfunction buildCompleteEvent(record: any): CompleteEvent {\n  const event = extractEventWithStack(record) as CompleteEvent;\n  return moveProperties(event.args!, event, ['dur', 'tdur', 'esf', 'estack']);\n}\n\nfunction buildCounterEvent(record: any): CounterEvent {\n  const event = bunyan2trace(record) as CounterEvent;\n  delete event.cat;\n  return moveProperties(event.args!, event, ['id']);\n}\n\nfunction buildDurationBeginEvent(record: any): DurationBeginEvent {\n  return extractEventWithStack(record) as DurationBeginEvent;\n}\n\nfunction buildDurationEndEvent(record: any): DurationEndEvent {\n  const event = extractEventWithStack(record) as DurationEndEvent;\n  delete event.name;\n  delete event.cat;\n  return event;\n}\n\nfunction buildMetadataEvent(record: any): MetadataEvent {\n  const event = bunyan2trace(record) as MetadataEvent;\n  delete event.cat;\n  return event;\n}\n\nfunction buildInstantEvent(record: any): InstantEvent {\n  const event = extractEventWithStack(record) as InstantEvent;\n  const args = moveProperties(event.args!, event, ['s']);\n  if (args.s === 'g' || args.s === 'p') {\n    delete event.sf;\n    delete event.stack;\n  }\n\n  return event;\n}\n\nfunction buildFallbackEvent(record: any): InstantEvent {\n  const event = buildInstantEvent(record);\n  event.ph = 'i';\n  return event;\n}\n\nfunction extractTraceEvent(record: any): Event {\n  const {\n    cat,\n    cname,\n    ph,\n    tts,\n    pid,\n    tid,\n    time,\n    msg: name,\n    name: _processName,\n    hostname: _hostname,\n    ...args\n  } = record;\n\n  const ts = new Date(time).getTime() * 1e3;\n\n  return {\n    cat,\n    cname,\n    ph,\n    ts,\n    tts,\n    pid,\n    tid,\n    name,\n    args,\n  } as Event;\n}\n\nfunction extractEventWithStack(record: any): EventWithStack {\n  const event = extractTraceEvent(record) as EventWithStack;\n  return moveProperties(event.args!, event, ['sf', 'stack']);\n}\n\nfunction moveProperties<T extends Record<string, any>>(\n  source: Record<string, any>,\n  target: T,\n  keys: (keyof T)[],\n): T {\n  for (const key of keys) {\n    if (source[key as string] !== undefined) {\n      target[key] = source[key as string];\n      delete source[key as string];\n    }\n  }\n\n  return target;\n}\n","import type { Event } from 'trace-event-lib';\nimport * as TEL from 'trace-event-lib';\nimport type { Transform } from 'node:stream';\n\nexport class StreamEventBuilder extends TEL.AbstractEventBuilder {\n  constructor(protected readonly stream: Transform) {\n    super();\n  }\n\n  public send(event: Event) {\n    this.stream.push(event);\n  }\n}\n","import type { TraceEventStreamOptions } from './TraceEventStreamOptions';\nimport type { ThreadGroupConfig } from '../threads';\n\nexport function normalizeOptions(\n  options: TraceEventStreamOptions,\n): Required<TraceEventStreamOptions> {\n  options.ignoreFields = options.ignoreFields ?? ['v', 'hostname', 'level', 'name'];\n  options.defaultThreadName = options.defaultThreadName ?? 'Main Thread';\n  options.maxConcurrency = options.maxConcurrency ?? 100;\n  options.strict = options.strict ?? false;\n  options.threadGroups = [...(options.threadGroups ?? [])].map((threadGroup, index) =>\n    typeof threadGroup === 'string'\n      ? {\n          id: threadGroup,\n          displayName: threadGroup,\n        }\n      : validateThreadGroup(threadGroup, index),\n  );\n\n  if (options.maxConcurrency < 1) {\n    throw new Error(`maxConcurrency must be at least 1, got ${options.maxConcurrency}`);\n  }\n\n  return options as Required<TraceEventStreamOptions>;\n}\n\nfunction validateThreadGroup(threadGroup: ThreadGroupConfig, index: number) {\n  if (!threadGroup.id) {\n    throw new Error('Missing thread group ID in thread group at index ' + index);\n  }\n\n  if (threadGroup.maxConcurrency != null) {\n    if (threadGroup.maxConcurrency < 1) {\n      throw new Error(\n        `Max concurrency (${threadGroup.id} -> ${threadGroup.maxConcurrency}) has to be a positive integer`,\n      );\n    }\n\n    if (threadGroup.maxConcurrency > 1e6) {\n      throw new Error(\n        `Max concurrency (${threadGroup.id} -> ${threadGroup.maxConcurrency}) cannot be greater than 1,000,000`,\n      );\n    }\n  }\n\n  return threadGroup;\n}\n","import { Transform } from 'node:stream';\n\nimport { isError } from '../../utils';\n\nimport { ThreadGroupDispatcher } from './threads';\nimport type { ThreadGroupConfig } from './threads';\nimport { bunyan2trace } from './bunyan2trace';\nimport { StreamEventBuilder } from './StreamEventBuilder';\nimport type { TraceEventStreamOptions } from './options/TraceEventStreamOptions';\nimport { normalizeOptions } from './options/normalizeOptions';\n\n// TODO: add tests\nexport class BunyanTraceEventStream extends Transform {\n  readonly #knownTids = new Set<number>();\n  readonly #threadGroupDispatcher: ThreadGroupDispatcher;\n  readonly #builder = new StreamEventBuilder(this);\n  readonly #ignoreFields: string[];\n\n  #started = false;\n\n  constructor(userOptions: TraceEventStreamOptions = {}) {\n    super({ objectMode: true });\n\n    const options = normalizeOptions(userOptions);\n    this.#ignoreFields = options.ignoreFields;\n    this.#threadGroupDispatcher = new ThreadGroupDispatcher({\n      strict: options.strict ?? false,\n      defaultThreadName: options.defaultThreadName ?? 'Main Thread',\n      maxConcurrency: options.maxConcurrency ?? 100,\n    });\n\n    for (const threadGroup of options.threadGroups) {\n      this.#threadGroupDispatcher.registerThreadGroup(threadGroup as ThreadGroupConfig);\n    }\n  }\n\n  _transform(\n    record: unknown,\n    _encoding: string,\n    callback: (error?: Error | null, data?: unknown) => void,\n  ) {\n    const json = typeof record === 'string' ? JSON.parse(record) : record;\n    const event = json && bunyan2trace(json);\n\n    if (event.args) {\n      for (const field of this.#ignoreFields) {\n        delete event.args[field];\n      }\n    }\n\n    if (!this.#started) {\n      this.#started = true;\n      this.#builder.metadata({\n        pid: event.pid,\n        ts: event.ts,\n        name: 'process_name',\n        args: { name: json.name },\n      });\n    }\n\n    const tid = (event.tid = this.#threadGroupDispatcher.resolve(event.ph, event.tid));\n    if (isError(tid)) {\n      callback(tid);\n      return;\n    }\n\n    if (!this.#knownTids.has(tid)) {\n      this.#knownTids.add(tid);\n\n      const threadName = this.#threadGroupDispatcher.name(tid);\n      if (threadName) {\n        this.#builder.metadata({\n          pid: event.pid,\n          tid: event.tid,\n          ts: event.ts,\n          name: 'thread_name',\n          args: { name: threadName },\n        });\n      }\n    }\n\n    this.#builder.send(event);\n    callback(null);\n  }\n}\n","import fs from 'node:fs';\nimport type { Readable } from 'node:stream';\nimport { Transform } from 'node:stream';\n// eslint-disable-next-line import/extensions\nimport StreamArray from 'stream-json/streamers/StreamArray.js';\n\nexport function jsonlReadFile(filePath: string): Readable {\n  return fs\n    .createReadStream(filePath, { encoding: 'utf8' })\n    .pipe(StreamArray.withParser())\n    .pipe(new MapValues(filePath));\n}\n\nclass MapValues extends Transform {\n  constructor(protected readonly filePath: string) {\n    super({ objectMode: true });\n  }\n\n  _transform(\n    record: any,\n    _encoding: string,\n    callback: (error?: Error | null, data?: unknown) => void,\n  ) {\n    this.push({\n      ...record,\n      filePath: this.filePath,\n    } as JSONLEntry);\n\n    callback();\n  }\n}\n\nexport type JSONLEntry<T = unknown> = {\n  filePath: string;\n  key: number;\n  value: T;\n};\n","import fs from 'node:fs';\nimport { Writable } from 'node:stream';\n\nexport function jsonlWriteFile(filePath: string): Writable {\n  return new JSONLFileStream({ filePath });\n}\n\ntype JSONLFileStreamOptions = {\n  filePath: string;\n};\n\ntype ErrorCallback = (error?: Error | null) => void;\n\n// Custom writable stream to append JSON objects\nclass JSONLFileStream extends Writable {\n  private readonly _filePath: string;\n  private _fileDescriptor = Number.NaN;\n  private _offset = Number.NaN;\n  private _counter = 0;\n\n  constructor(options: JSONLFileStreamOptions) {\n    super({ objectMode: true });\n\n    this._filePath = options.filePath;\n  }\n\n  _construct(callback: ErrorCallback) {\n    this._offset = 0;\n    this._fileDescriptor = fs.openSync(this._filePath, 'wx');\n\n    const content = Buffer.from('[]\\n');\n    fs.write(this._fileDescriptor, content, this._offset, content.length, (error) => {\n      if (error) {\n        callback(error);\n      } else {\n        this._offset += 1;\n        callback();\n      }\n    });\n  }\n\n  _write(chunk: unknown, _: unknown, callback: ErrorCallback) {\n    const content =\n      this._counter++ > 0 ? `,\\n${JSON.stringify(chunk)}]\\n` : `${JSON.stringify(chunk)}]\\n`;\n    const buffer = Buffer.from(content);\n\n    fs.write(\n      this._fileDescriptor,\n      buffer,\n      0,\n      buffer.length,\n      this._offset,\n      (error: Error | null, bytesWritten: number) => {\n        if (error) {\n          callback(error);\n        } else {\n          this._offset += bytesWritten - 2;\n          callback();\n        }\n      },\n    );\n  }\n\n  _final(callback: ErrorCallback) {\n    fs.close(this._fileDescriptor, callback);\n  }\n}\n","import type { LeafNode, TreeNode } from './TreeNode';\n\nexport class ArrayTreeNode<Value = unknown, ChildNode extends LeafNode<any> = LeafNode>\n  implements TreeNode<Value, ChildNode>\n{\n  index = -1;\n  parent?: TreeNode<any, this>;\n\n  readonly #children: ChildNode[] = [];\n  readonly #map = new Map<unknown, ChildNode>();\n\n  constructor(public value: Value) {}\n\n  get size() {\n    return this.#children.length;\n  }\n\n  [Symbol.iterator]() {\n    return this.#children[Symbol.iterator]();\n  }\n\n  findByValue(value: unknown): ChildNode | undefined {\n    return this.#map.get(value);\n  }\n\n  appendChild(node: ChildNode): ChildNode {\n    node.index = this.size;\n    node.parent = this as TreeNode;\n    this.#children.push(node);\n    this.#map.set(node.value, node);\n    return node;\n  }\n}\n","import type { LeafNode, TreeNode } from './TreeNode';\n\nexport class RangeTreeNode<Value> implements LeafNode<Value> {\n  index = -1;\n  parent?: TreeNode<any, this>;\n\n  #min = Number.POSITIVE_INFINITY;\n  #max = Number.NEGATIVE_INFINITY;\n\n  constructor(public value: Value) {}\n\n  get min() {\n    return this.#min;\n  }\n\n  get max() {\n    return this.#max;\n  }\n\n  get size() {\n    return this.#max - this.#min + 1;\n  }\n\n  protected add(child: number) {\n    if (child < this.#min) {\n      this.#min = child;\n    }\n    if (child > this.#max) {\n      this.#max = child;\n    }\n  }\n}\n","import { RangeTreeNode } from '../abstract';\n\nexport class FileNode extends RangeTreeNode<string> {\n  rank?: number;\n  offset?: number;\n\n  addTID(tid: number): void {\n    return super.add(tid);\n  }\n\n  transpose(tid: number): number {\n    if (tid < this.min || tid > this.max) {\n      throw new Error(`Value ${tid} not found in range: [${this.min}, ${this.max}]`);\n    }\n\n    return (this.offset ?? 0) + (tid - this.min);\n  }\n}\n","import { ArrayTreeNode } from '../abstract';\nimport { FileNode } from './FileNode';\n\nexport class PIDNode extends ArrayTreeNode<number, FileNode> {\n  addFile(file: string): FileNode {\n    /* eslint-disable-next-line unicorn/prefer-dom-node-append */\n    return this.findByValue(file) ?? this.appendChild(new FileNode(file));\n  }\n}\n","import { ArrayTreeNode } from '../abstract';\nimport { PIDNode } from './PIDNode';\n\nexport class RootNode extends ArrayTreeNode<never, PIDNode> {\n  constructor() {\n    super(undefined as never);\n  }\n\n  addPID(pid: number): PIDNode {\n    /* eslint-disable-next-line unicorn/prefer-dom-node-append */\n    return this.findByValue(pid) ?? this.appendChild(new PIDNode(pid));\n  }\n\n  rank() {\n    let index = 0;\n    let offset = 0;\n\n    for (const pid of this) {\n      for (const file of pid) {\n        file.rank = index++;\n        file.offset = offset;\n        offset += file.size;\n      }\n    }\n  }\n}\n","import { RootNode } from './tree';\nimport type { Resolver } from './Resolver';\n\nexport class PIDResolver implements Resolver {\n  protected tree = new RootNode();\n\n  add(pid: number, _filePath: string, tid: number) {\n    this.tree.addPID(pid).addFile('').addTID(tid);\n  }\n\n  finalize() {\n    this.tree.rank();\n  }\n\n  resolvePid(_filePath: string, pid: number): number {\n    return pid;\n  }\n\n  resolveTid(_filePath: string, pid: number, tid: number): number {\n    const $pid = this.tree.findByValue(pid);\n    const $file = $pid?.findByValue('');\n    return $file?.transpose(tid) ?? Number.NaN;\n  }\n}\n","import { PIDResolver } from './PIDResolver';\n\nexport class FilePIDResolver extends PIDResolver {\n  add(pid: number, filePath: string, tid: number) {\n    this.tree.addPID(pid).addFile(filePath).addTID(tid);\n  }\n\n  resolvePid(filePath: string, pid: number): number {\n    const $pid = this.tree.findByValue(pid);\n    const $file = $pid?.findByValue(filePath);\n    return ($file?.rank ?? Number.NaN) + 1;\n  }\n\n  resolveTid(filePath: string, pid: number, tid: number): number {\n    const $pid = this.tree.findByValue(pid);\n    const $file = $pid?.findByValue(filePath);\n    return $file?.transpose(tid) ?? Number.NaN;\n  }\n}\n","import type { Readable } from 'node:stream';\nimport type { TraceEvent } from 'trace-event-lib';\nimport multiSortStream from 'multi-sort-stream';\n\nimport type { JSONLEntry } from '../../jsonl';\n\nexport function multisort(streams: Readable[]): Readable {\n  return multiSortStream(streams, comparator);\n}\n\nfunction comparator(a: unknown, b: unknown): number {\n  const { value: aa } = a as JSONLEntry<TraceEvent>;\n  const { value: bb } = b as JSONLEntry<TraceEvent>;\n\n  return aa.ts < bb.ts ? -1 : aa.ts > bb.ts ? 1 : 0;\n}\n","import { Writable } from 'node:stream';\nimport type { TraceEvent } from 'trace-event-lib';\nimport type { Resolver } from '../resolvers';\nimport type { JSONLEntry } from '../../jsonl';\n\nexport class TraceAnalyze extends Writable {\n  readonly #resolver: Resolver;\n\n  constructor(resolver: Resolver) {\n    super({\n      objectMode: true,\n      highWaterMark: Number.MAX_SAFE_INTEGER,\n    });\n\n    this.#resolver = resolver;\n  }\n\n  _write(\n    chunk: unknown,\n    _encoding: string,\n    callback: (error?: Error | null, data?: unknown) => void,\n  ) {\n    const entry = chunk as JSONLEntry<TraceEvent>;\n    this.#resolver.add(entry.value.pid, entry.filePath, entry.value.tid);\n    callback();\n  }\n\n  _final(callback: (error?: Error | null) => void) {\n    this.#resolver.finalize();\n    callback();\n  }\n}\n","import { Transform } from 'node:stream';\nimport type { TraceEvent } from 'trace-event-lib';\n\nimport type { Resolver } from '../resolvers';\nimport type { JSONLEntry } from '../../jsonl';\n\nexport class TraceMerge extends Transform {\n  readonly #resolverPromise: Promise<Resolver>;\n  #resolver?: Resolver;\n\n  constructor(resolverPromise: Promise<Resolver>) {\n    super({\n      objectMode: true,\n      highWaterMark: Number.MAX_SAFE_INTEGER,\n    });\n\n    this.#resolverPromise = resolverPromise;\n  }\n\n  _transform(\n    chunk: unknown,\n    _encoding: string,\n    callback: (error?: Error | null, data?: unknown) => void,\n  ) {\n    if (this.#resolver) {\n      const entry = chunk as JSONLEntry<TraceEvent>;\n      const output = { ...entry.value };\n      if (output.pid != null) {\n        output.pid = this.#resolver.resolvePid(entry.filePath, entry.value.pid);\n      }\n      if (output.tid != null) {\n        output.tid = this.#resolver.resolveTid(entry.filePath, entry.value.pid, entry.value.tid);\n      }\n      this.push(output);\n      callback();\n    } else {\n      this.#resolverPromise.then(\n        (resolver) => {\n          this.#resolver = resolver;\n          this._transform(chunk, _encoding, callback);\n        },\n        (error) => {\n          callback(error);\n        },\n      );\n    }\n  }\n}\n","import type { Readable } from 'node:stream';\n\nimport { jsonlReadFile } from '../jsonl';\nimport type { Resolver } from './resolvers';\nimport { FilePIDResolver, PIDResolver } from './resolvers';\nimport { multisort, TraceAnalyze, TraceMerge } from './transforms';\n\nexport type TraceMergeOptions = {\n  mode: 'pid' | 'fpid';\n};\n\nexport function traceMerge(filePaths: string[], options?: TraceMergeOptions): Readable {\n  const streams = filePaths.map((filePath) => jsonlReadFile(filePath));\n  const resolver = makeResolver(options);\n  const $resolver = makeDeferred<Resolver>();\n  const analyze = new TraceAnalyze(resolver)\n    .on('error', (error) => $resolver.reject(error))\n    .on('finish', () => $resolver.resolve(resolver));\n\n  const merge = new TraceMerge($resolver.promise);\n\n  const sorted = multisort(streams);\n  sorted.pipe(analyze);\n  return sorted.pipe(merge);\n}\n\nfunction makeResolver(options?: TraceMergeOptions): Resolver {\n  return options?.mode === 'fpid' ? new FilePIDResolver() : new PIDResolver();\n}\n\nfunction makeDeferred<T>() {\n  let resolve: (value: T) => void;\n  let reject: (reason?: unknown) => void;\n  const promise = new Promise<T>((_resolve, _reject) => {\n    resolve = _resolve;\n    reject = _reject;\n  });\n\n  return {\n    promise: promise,\n    resolve: resolve!,\n    reject: reject!,\n  };\n}\n","import type { Transform } from 'node:stream';\nimport { BunyanTraceEventStream, jsonlWriteFile } from './streams';\nimport type { TraceEventStreamOptions } from './streams';\n\nexport function traceEventStream(\n  options: TraceEventStreamOptions & { filePath: string },\n): Transform {\n  const jsonl = jsonlWriteFile(options.filePath);\n  const stream = new BunyanTraceEventStream(options);\n  stream.pipe(jsonl);\n  return stream;\n}\n","import type { Readable } from 'node:stream';\nimport type { TraceMergeOptions } from './streams';\nimport { jsonlWriteFile, traceMerge } from './streams';\n\nexport function uniteTraceEvents(sourcePaths: string[], options?: TraceMergeOptions): Readable {\n  return traceMerge(sourcePaths, options);\n}\n\nexport async function uniteTraceEventsToFile(\n  sourcePaths: string[],\n  destinationPath: string,\n  options?: TraceMergeOptions,\n) {\n  return new Promise((resolve, reject) => {\n    uniteTraceEvents(sourcePaths, options)\n      .pipe(jsonlWriteFile(destinationPath))\n      .on('finish', resolve)\n      .on('error', reject);\n  });\n}\n","import type { BunyaminConfig, BunyanLikeLogger } from './decorator';\nimport { Bunyamin } from './decorator';\n\nexport * from './decorator/types';\nexport type { Bunyamin } from './decorator';\n\nexport function wrapLogger<Logger extends BunyanLikeLogger>(\n  options: BunyaminConfig<Logger>,\n): Bunyamin<Logger>;\nexport function wrapLogger<Logger extends BunyanLikeLogger>(\n  logger: Logger,\n  options?: Omit<BunyaminConfig<Logger>, 'logger'>,\n): Bunyamin<Logger>;\nexport function wrapLogger<Logger extends BunyanLikeLogger>(\n  maybeLogger: any,\n  maybeConfig?: unknown,\n): Bunyamin<Logger> {\n  const logger = (maybeLogger.logger ?? maybeLogger) as Logger;\n  const config = (logger === maybeLogger ? maybeConfig : maybeLogger) as\n    | BunyaminConfig<Logger>\n    | undefined;\n\n  return new Bunyamin({\n    ...config,\n    logger,\n  });\n}\n","import realm from './realm';\n\nexport * from './noopLogger';\nexport * from './traceEventStream';\nexport * from './uniteTraceEvents';\nexport * from './wrapLogger';\nexport { isDebug } from './is-debug';\n\nexport const bunyamin = realm.bunyamin;\nexport const nobunyamin = realm.nobunyamin;\nexport const threadGroups = realm.threadGroups;\n\nexport default bunyamin;\n"],"names":["deflateCategories","cat","undefined","Array","isArray","filter","Boolean","join","String","inflateCategories","split","mergeCategories","left","right","iright","categories","uniqueCategories","Set","values","createIsDebug","namespaces","skips","names","part","destination","pattern","replace","push","RegExp","isDebug","name","length","some","regex","test","process","env","DEBUG","isSelfDebug","flow","f","g","x","isActionable","value","isError","Error","isPromiseLike","maybePromise","then","isObject","isUndefined","MessageStack","constructor","options","_options$noBeginMessa","Object","defineProperty","_ensureStack","_ensureStack2","_simple","writable","Map","_complex","_noBeginMessage","_classPrivateFieldLooseBase","noBeginMessage","tid","message","stack","pop","_stack$pop","has","set","get","alias","subtid","submap","StackTraceError","empty","_fields","_classPrivateFieldLooseKey","_shared","_setupLogMethod","_begin","_beginInternal","_end","_endInternal","_instant","_complete","_completeInternal","_resolveLogEntry","_mergeFields","_transformContext","_resolveFields","_assertNotChild","_assertNotImmutable","Bunyamin","shared","fields","_assertNotImmutable2","_assertNotChild2","_resolveFields2","_transformContext2","_mergeFields2","_resolveLogEntry2","_completeInternal2","_complete2","_instant2","_endInternal2","_end2","_beginInternal2","_begin2","_setupLogMethod2","fatal","error","warn","info","debug","trace","config","loggerPriority","messageStack","threadGroups","logger","useLogger","priority","currentPriority","useTransform","transformFields","child","overrides","childContext","level","logMethod","bind","assign","begin","complete","end","arguments_","entry","customMessage","beginMessage","maybeContext","maybeMessage","maybeAction","action","customContext","endContext","ph","result","success","err","phase","userContext","slice","maybeError","methodName","immutable","noop","NoopLogger","noopLogger","_options","_bunyamin","_debugMode","_groups","_logAddition","ThreadGroups","bunyamin","_logAddition2","add","group","id","Symbol","iterator","displayName","create","selfDebug","nobunyamin","getCached","globalThis","__BUNYAMIN__","setCached","realm","_getCached","NIL","_stacks","_threads","_countMax","_findTID","_transposeTID","_error","ThreadDispatcher","strict","min","max","_error2","_transposeTID2","_findTID2","resolve","indexOf","findIndex","count","threads","_strict","_dispatchers","_maxConcurrency","_defaultThreadName","_names","_freeThreadId","_resolveDispatcher","_resolveAlias","_resolveId","_ensureGroupDispatcher","ThreadGroupDispatcher","_ensureGroupDispatcher2","_resolveId2","_resolveAlias2","_resolveDispatcher2","IntervalTree","defaultThreadName","maxConcurrency","registerThreadGroup","_config$maxConcurrenc","insert","search","dispatcher","threadAlias","groupName","threadGroup","bunyan2trace","record","buildFallbackEvent","buildDurationBeginEvent","buildDurationEndEvent","buildInstantEvent","buildAsyncEvent","buildCompleteEvent","buildCounterEvent","buildMetadataEvent","event","moveProperties","args","extractEventWithStack","s","sf","extractTraceEvent","cname","tts","pid","time","msg","_processName","hostname","_hostname","ts","Date","getTime","source","target","keys","key","StreamEventBuilder","TEL","AbstractEventBuilder","stream","send","normalizeOptions","_options$ignoreFields","_options$defaultThrea","_options$maxConcurren","_options$strict","_options$threadGroups","ignoreFields","map","index","validateThreadGroup","_knownTids","_threadGroupDispatcher","_builder","_ignoreFields","_started","BunyanTraceEventStream","Transform","userOptions","objectMode","_transform","_encoding","callback","json","JSON","parse","field","metadata","threadName","jsonlReadFile","filePath","fs","createReadStream","encoding","pipe","StreamArray","withParser","MapValues","jsonlWriteFile","JSONLFileStream","Writable","_filePath","_fileDescriptor","Number","NaN","_offset","_counter","_construct","openSync","content","Buffer","from","write","_write","chunk","_","stringify","buffer","bytesWritten","_final","close","ArrayTreeNode","parent","_children","_map","size","findByValue","appendChild","node","RangeTreeNode","_min","POSITIVE_INFINITY","_max","NEGATIVE_INFINITY","FileNode","rank","offset","addTID","transpose","_this$offset","PIDNode","addFile","file","_this$findByValue","RootNode","addPID","PIDResolver","tree","finalize","resolvePid","resolveTid","_$file$transpose","$pid","$file","FilePIDResolver","_$file$rank","multisort","streams","multiSortStream","comparator","a","b","aa","bb","_resolver","TraceAnalyze","resolver","highWaterMark","MAX_SAFE_INTEGER","_resolverPromise","TraceMerge","resolverPromise","output","traceMerge","filePaths","makeResolver","$resolver","makeDeferred","analyze","on","reject","merge","promise","sorted","mode","Promise","_resolve","_reject","traceEventStream","jsonl","uniteTraceEvents","sourcePaths","uniteTraceEventsToFile","destinationPath","wrapLogger","maybeLogger","maybeConfig","_maybeLogger$logger"],"mappings":"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"}